"use strict";(self.webpackChunkchia_docs=self.webpackChunkchia_docs||[]).push([[6052],{1990:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>l,default:()=>p,frontMatter:()=>a,metadata:()=>c,toc:()=>d});var r=n(5893),o=n(1151),s=n(4866),i=n(5162);const a={title:"Node Syncing",slug:"/troubleshooting/node-syncing"},l=void 0,c={id:"troubleshooting/node-syncing",title:"Node Syncing",description:"Port forwarding port 8444 can solve many sync issues and helps improve Chia's network health.",source:"@site/docs/troubleshooting/node-syncing.md",sourceDirName:"troubleshooting",slug:"/troubleshooting/node-syncing",permalink:"/troubleshooting/node-syncing",draft:!1,unlisted:!1,editUrl:"https://github.com/Chia-Network/chia-docs/blob/main/docs/troubleshooting/node-syncing.md",tags:[],version:"current",frontMatter:{title:"Node Syncing",slug:"/troubleshooting/node-syncing"},sidebar:"tutorialSidebar",previous:{title:"Check if Things are Working",permalink:"/troubleshooting/check-if-things-are-working"},next:{title:"Logging Reference",permalink:"/troubleshooting/logging-reference"}},u={},d=[{value:"Port Forwarding Settings",id:"port-forwarding-settings",level:2},{value:"Why forward port 8444?",id:"why-forward-port-8444",level:2},{value:"Speed up connecting to nodes",id:"speed-up-connecting-to-nodes",level:2},{value:"Dealing With Carrier-Grade NAT",id:"dealing-with-carrier-grade-nat",level:2}];function h(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,o.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:"Port forwarding port 8444 can solve many sync issues and helps improve Chia's network health."}),"\n",(0,r.jsxs)(t.p,{children:["Port 8444 is the ",(0,r.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Port_%28computer_networking%29",children:"port"})," through which other Chia computers can communicate with your PC. When you set up port forwarding on port 8444, the Chia software on your computer can quickly talk to other PCs, link up, and start downloading and syncing with the Chia blockchain."]}),"\n",(0,r.jsx)(t.p,{children:"The network is undergoing rapid growth and expansion. Many of the newly arrived Chia peers (computers) do not open up port 8444. It makes it very hard for the network. So please port forward on port 8444!"}),"\n",(0,r.jsxs)(t.p,{children:["Use ",(0,r.jsx)(t.a,{href:"https://portchecker.co/",children:"this port checker"})," to check if your router's port 8444 is closed."]}),"\n",(0,r.jsx)(t.h2,{id:"port-forwarding-settings",children:"Port Forwarding Settings"}),"\n",(0,r.jsxs)(t.p,{children:["Port forwarding is done on your router. How you set it up depends on your router's make and model. Look through your router's manual or just search for \"",(0,r.jsx)(t.code,{children:"<your router name and model>"}),' how to port forward" to get started.']}),"\n",(0,r.jsx)(t.p,{children:"When you port forward you want to allow outside IP addresses to connect to your main node (computer) through port 8444 to the Chia software."}),"\n",(0,r.jsx)(t.p,{children:"Most routers will ask you from where you are allowing and to what you are connecting to. You want to set up port forwarding to allow any outside connection to connect to the IP address of your main node on your network through port 8444. Router manufacturers might call the settings different things, but the concept is always the same: Outside computers connecting through port 8444 to your computer."}),"\n",(0,r.jsx)(t.p,{children:"Here are the settings most routers will ask for:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Set connection type to ",(0,r.jsx)(t.em,{children:"TCP"})," or ",(0,r.jsx)(t.em,{children:"TCP & UDP"})]}),"\n",(0,r.jsx)(t.li,{children:'Destination (or Forwarding) IP address - This is your main node (computer) IP address on your internal network; search online on how to do this for your type of computer. If you search for "what is my IP address" it will give you your external IP address, this is not the one you want.'}),"\n",(0,r.jsxs)(t.li,{children:["Originating (or From) IP address - Set this to all or sometimes just an asterisk may be used ",(0,r.jsx)(t.code,{children:"*"})]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"why-forward-port-8444",children:"Why forward port 8444?"}),"\n",(0,r.jsx)(t.p,{children:"All peers (computers) with a closed port 8444 are completely dependent on pc peers with open port 8444. They are the only PCs they can talk to. If you got 1,000 nodes with an open port 8444, but 20,000 nodes with a closed port 8444, trying to sync, it will only just be able to theoretically have enough IP's estimated 3,000 can sync at a time, while the other wait for another open Chia user with open port 8444. Right now (Mid April '20) it seems that number is even much worse. And it causes a scenario where there just isn't enough open port 8444 peers to serve all the closed port 8444 peers. The only way around this is to ensure that you got an open port 8444."}),"\n",(0,r.jsx)(t.p,{children:"If you somehow are able to open up your port 8444 you will quickly have peers connecting to you and have a much easier time to get connections established."}),"\n",(0,r.jsx)(t.h2,{id:"speed-up-connecting-to-nodes",children:"Speed up connecting to nodes"}),"\n",(0,r.jsx)(t.p,{children:"If you would like to speed up connecting to other nodes and syncing, add one of these introducer nodes:"}),"\n",(0,r.jsxs)(s.Z,{defaultValue:"mainnet",groupId:"introducers",values:[{label:"Mainnet",value:"mainnet"},{label:"Testnet11",value:"testnet11"}],children:[(0,r.jsxs)(i.Z,{value:"mainnet",children:[(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["North Asia: ",(0,r.jsx)(t.code,{children:"introducer-ap-northeast-1.chia.net:8444"})]}),"\n",(0,r.jsxs)(t.li,{children:["South Asia: ",(0,r.jsx)(t.code,{children:"introducer-ap-southeast-1.chia.net:8444"})]}),"\n",(0,r.jsxs)(t.li,{children:["Western North America: ",(0,r.jsx)(t.code,{children:"introducer-us-west-2.chia.net:8444"})]}),"\n",(0,r.jsxs)(t.li,{children:["Eastern North America: ",(0,r.jsx)(t.code,{children:"introducer-us-east-1.chia.net:8444"})]}),"\n",(0,r.jsxs)(t.li,{children:["Europe: ",(0,r.jsx)(t.code,{children:"introducer-eu-west-2.chia.net:8444"})]}),"\n"]}),(0,r.jsx)(t.p,{children:"There is a public node share the available 8444 peers every hour."}),(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://chia.keva.app",children:"chia.keva.app"})}),"\n"]})]}),(0,r.jsxs)(i.Z,{value:"testnet11",children:[(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"DNS Introducer: dns-introducer-testnet11.chia.net"}),"\n",(0,r.jsx)(t.li,{children:"Legacy Introducer: introducer-testnet11.chia.net:58444"}),"\n"]}),(0,r.jsx)(t.p,{children:"Note: please only use the CNI operated nodes as a last resort for connecting to peers, these nodes might be running different client versions and are not intended to be used as trusted full nodes."}),(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"CNI Operated Full Node: testnet11-node.chia.net"}),"\n"]})]})]}),"\n",(0,r.jsxs)(t.p,{children:["These can be added in the GUI via the button, or via the CLI with ",(0,r.jsx)(t.code,{children:"chia show -a PEER_ADDRESS:PORT"})," where ",(0,r.jsx)(t.code,{children:"PORT"})," will usually be 8444."]}),"\n",(0,r.jsx)(t.h1,{id:"detailed-explanation",children:"Detailed explanation"}),"\n",(0,r.jsxs)(t.p,{children:["A regular pc can communicate ",(0,r.jsx)(t.strong,{children:"out"})," with endless ports-- if the user is sending a signal out -- pc opens a port -- signal goes out, pc closes the port.\nChia uses port 8444 as instant verified communication. So an open port can allow instant communication and start the blockchain sync. Signal comes in on port 8444- that Chia pc is verified, then ",(0,r.jsx)(t.strong,{children:"both"}),' user\'s pc, opens their own "communication ports ex port 8421" and that new user can now sync and now they are linked together forming part of Chia mesh.']}),"\n",(0,r.jsx)(t.p,{children:"If the users port 8444 is closed, the users pc has to start sending multiple signals out and hope that a pc with open port 8444 will link with them, then the sync starts. (1) pc can only link up a few pc and with so many other Chia users coming on board, they all have to wait. Keep in mind, Chia is built on a mesh network, the blockchain is shared among all the users, not from central pc."}),"\n",(0,r.jsx)(t.h2,{id:"dealing-with-carrier-grade-nat",children:"Dealing With Carrier-Grade NAT"}),"\n",(0,r.jsxs)(t.p,{children:["Opened port 8444 on your router but still not getting connections? With the exhaustion of the IPv4 space, it's increasingly common for ISPs to use ",(0,r.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Carrier-grade_NAT",children:"Carrier-Grade NAT"})," (CGN, CG-NAT, NAT444) to put multiple customers behind a single IP address. In this case, even if you open 8444 on your router, other nodes will not be able to connect to you. There are a couple options:"]}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:'Ask your ISP for a dedicated IP address. They\'ll probably want more money, and may require you to upgrade to a "business" plan.'}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Establish a VPN tunnel through the NAT to a cloud server with a public IP address. It's easier than it sounds, and can cost as little as $3-5 a month for a cheap cloud server (some common cloud server providers: AWS, GCP, Digital Ocean, Vultr, Hetzner, Linode). When selecting a provider and server size, pay careful attention to bandwidth; a Chia fullnode isn't too demanding, but can require several GB per day. 1 TB per month is typical of lower-cost VPSs and should be plenty (do keep an eye on it though, bandwidth overage costs can be expensive!)."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["Setting up a VPN used to be a daunting task, but ",(0,r.jsx)(t.a,{href:"https://www.wireguard.com",children:"Wireguard"})," has greatly simplified it. The summary is you run Wireguard on both your home server and the cloud server:"]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"the cloud server is configured to listen for VPN connections from your home server, and route all traffic incoming on 8444 to your home server, while also routing outgoing traffic from your home server to the internet."}),"\n",(0,r.jsx)(t.li,{children:'the home server is configured to route all internet traffic (but not local) through the cloud server, while periodically sending a "keepalive" packet to ensure the connection stays open.'}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["Here is a more detailed write-up with ",(0,r.jsx)(t.a,{href:"https://www.kmr.me/posts/wireguard/",children:"example wireguard configuration"}),"."]})]})}function p(e={}){const{wrapper:t}={...(0,o.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},5162:(e,t,n)=>{n.d(t,{Z:()=>i});n(7294);var r=n(512);const o={tabItem:"tabItem_Ymn6"};var s=n(5893);function i(e){let{children:t,hidden:n,className:i}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,r.Z)(o.tabItem,i),hidden:n,children:t})}},4866:(e,t,n)=>{n.d(t,{Z:()=>j});var r=n(7294),o=n(512),s=n(2466),i=n(6550),a=n(469),l=n(1980),c=n(7392),u=n(12);function d(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=t??function(e){return d(e).map((e=>{let{props:{value:t,label:n,attributes:r,default:o}}=e;return{value:t,label:n,attributes:r,default:o}}))}(n);return function(e){const t=(0,c.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function p(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function g(e){let{queryString:t=!1,groupId:n}=e;const o=(0,i.k6)(),s=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,l._X)(s),(0,r.useCallback)((e=>{if(!s)return;const t=new URLSearchParams(o.location.search);t.set(s,e),o.replace({...o.location,search:t.toString()})}),[s,o])]}function m(e){const{defaultValue:t,queryString:n=!1,groupId:o}=e,s=h(e),[i,l]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!p({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const r=n.find((e=>e.default))??n[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:t,tabValues:s}))),[c,d]=g({queryString:n,groupId:o}),[m,f]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[o,s]=(0,u.Nk)(n);return[o,(0,r.useCallback)((e=>{n&&s.set(e)}),[n,s])]}({groupId:o}),y=(()=>{const e=c??m;return p({value:e,tabValues:s})?e:null})();(0,a.Z)((()=>{y&&l(y)}),[y]);return{selectedValue:i,selectValue:(0,r.useCallback)((e=>{if(!p({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);l(e),d(e),f(e)}),[d,f,s]),tabValues:s}}var f=n(2389);const y={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var w=n(5893);function b(e){let{className:t,block:n,selectedValue:r,selectValue:i,tabValues:a}=e;const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,s.o5)(),u=e=>{const t=e.currentTarget,n=l.indexOf(t),o=a[n].value;o!==r&&(c(t),i(o))},d=e=>{let t=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const n=l.indexOf(e.currentTarget)+1;t=l[n]??l[0];break}case"ArrowLeft":{const n=l.indexOf(e.currentTarget)-1;t=l[n]??l[l.length-1];break}}t?.focus()};return(0,w.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":n},t),children:a.map((e=>{let{value:t,label:n,attributes:s}=e;return(0,w.jsx)("li",{role:"tab",tabIndex:r===t?0:-1,"aria-selected":r===t,ref:e=>l.push(e),onKeyDown:d,onClick:u,...s,className:(0,o.Z)("tabs__item",y.tabItem,s?.className,{"tabs__item--active":r===t}),children:n??t},t)}))})}function v(e){let{lazy:t,children:n,selectedValue:o}=e;const s=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=s.find((e=>e.props.value===o));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return(0,w.jsx)("div",{className:"margin-top--md",children:s.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==o})))})}function x(e){const t=m(e);return(0,w.jsxs)("div",{className:(0,o.Z)("tabs-container",y.tabList),children:[(0,w.jsx)(b,{...e,...t}),(0,w.jsx)(v,{...e,...t})]})}function j(e){const t=(0,f.Z)();return(0,w.jsx)(x,{...e,children:d(e.children)},String(t))}},1151:(e,t,n)=>{n.d(t,{Z:()=>a,a:()=>i});var r=n(7294);const o={},s=r.createContext(o);function i(e){const t=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),r.createElement(s.Provider,{value:t},e.children)}}}]);