"use strict";(self.webpackChunkchia_docs=self.webpackChunkchia_docs||[]).push([[5972],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>g});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),d=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=d(e.components);return a.createElement(s.Provider,{value:t},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),p=d(n),c=r,g=p["".concat(s,".").concat(c)]||p[c]||m[c]||l;return n?a.createElement(g,o(o({ref:t},u),{},{components:n})):a.createElement(g,o({ref:t},u))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,o=new Array(l);o[0]=c;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[p]="string"==typeof e?e:r,o[1]=i;for(var d=2;d<l;d++)o[d]=n[d];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},1030:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>m,frontMatter:()=>l,metadata:()=>i,toc:()=>d});var a=n(7462),r=(n(7294),n(3905));const l={title:"SSD Endurance",slug:"/ssd-endurance"},o=void 0,i={unversionedId:"plotting/ssd-endurance",id:"plotting/ssd-endurance",title:"SSD Endurance",description:"Estimated SSD wear out, endurance table",source:"@site/docs/plotting/ssd-endurance.md",sourceDirName:"plotting",slug:"/ssd-endurance",permalink:"/zh/ssd-endurance",draft:!1,editUrl:"https://github.com/Chia-Network/{{ REPOSITORY_NAME }}/blob/main/docs/plotting/ssd-endurance.md",tags:[],version:"current",frontMatter:{title:"SSD Endurance",slug:"/ssd-endurance"},sidebar:"tutorialSidebar",previous:{title:"K Sizes",permalink:"/zh/k-sizes"},next:{title:"Moving Plots",permalink:"/zh/moving-plots"}},s={},d=[{value:"Estimated SSD wear out, endurance table",id:"estimated-ssd-wear-out-endurance-table",level:2},{value:"Math",id:"math",level:2},{value:"Monitor Endurance in Linux",id:"monitor-endurance-in-linux",level:2},{value:"NVMe",id:"nvme",level:3},{value:"SATA",id:"sata",level:3},{value:"SAS",id:"sas",level:3},{value:"Adding new models",id:"adding-new-models",level:2}],u={toc:d},p="wrapper";function m(e){let{components:t,...n}=e;return(0,r.kt)(p,(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"estimated-ssd-wear-out-endurance-table"},"Estimated SSD wear out, endurance table"),(0,r.kt)("p",null,"The fastest plot creation is done completely in memory, but requires a server with a large amount of DRAM to perform this. Most consumer plotters are using an SSD as temporary storage to perform plotting. Mainstream SSDs today use NAND flash technology to store data. NAND is high performance, scalable, and low cost - warranting the use in virtually every computing segment from mobile phones, SD cards, consumer laptops, and data centers. However, NAND must be erased before the cell is programmed, a process known as a program erase cycle, and can only be performed a certain amount of times before the NAND cell wears out and can no longer reliably store user data. This is defined generally as an SSD no longer meeting the UBER (uncorrectable bit error rate), retention time (how long the device can store user data safely while powered off, at a given temperature), or functional failure (device can no longer power on). The metrics to measure endurance of an SSD is defined in Terabytes Written, or TBW, at a certain workload. The workload defined is generally the JESD219 workload from JEDEC organization. An SSD can still plot well beyond meeting it's rated TBW limit, because UBER can be measured (when seeing host errors) and retention is not required (Chia plotting requires temporary or ephemeral storage)."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Plotter"),(0,r.kt)("th",{parentName:"tr",align:null},"Cache / Ramdisk"),(0,r.kt)("th",{parentName:"tr",align:null},"Writes per K=32"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Chiapos beta (2020)"),(0,r.kt)("td",{parentName:"tr",align:null},"0"),(0,r.kt)("td",{parentName:"tr",align:null},"1.8 TBW")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Chiapos 2021"),(0,r.kt)("td",{parentName:"tr",align:null},"0"),(0,r.kt)("td",{parentName:"tr",align:null},"1.4 TBW")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"madMAx Chia_plot"),(0,r.kt)("td",{parentName:"tr",align:null},"0"),(0,r.kt)("td",{parentName:"tr",align:null},"1.43 TBW")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"madMAx Chia_plot"),(0,r.kt)("td",{parentName:"tr",align:null},"110G"),(0,r.kt)("td",{parentName:"tr",align:null},"0.396 TBW")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Bladebit Disk"),(0,r.kt)("td",{parentName:"tr",align:null},"0"),(0,r.kt)("td",{parentName:"tr",align:null},"1.225 TBW")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Bladebit Disk"),(0,r.kt)("td",{parentName:"tr",align:null},">","99G"),(0,r.kt)("td",{parentName:"tr",align:null},"0.381 TBW")))),(0,r.kt)("p",null,"Consumer NVMe SSDs are generally not recommended due to the lower endurance, and they often employ caching algorithms to faster media (SLC, or single level cell) for great bursty performance. They do not perform well under heavy workload sustained IO.\nThere are very high performance consumer NVMe SSDs that will offer great plotting performance, but the lower rated endurance in TBW will result in a faster wearout."),(0,r.kt)("p",null,"Here are some ",(0,r.kt)("a",{parentName:"p",href:"https://docs.google.com/spreadsheets/d/1mNUYRWeJUaijEZXupwP5k6IuATZGj1FB/edit#gid=1857251151"},"endurance examples"),"."),(0,r.kt)("p",null,"You can learn more about ",(0,r.kt)("a",{parentName:"p",href:"https://www.snia.org/forums/cmsi/ssd-endurance"},"SSD endurance from this SNIA whitepaper from JM"),"."),(0,r.kt)("h2",{id:"math"},"Math"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"NAND P/E Cycles = amount of program / erase cycles NAND can do before wearing out. NAND programs (writes) in pages and erases in blocks (contains many pages)"),(0,r.kt)("li",{parentName:"ul"},"Wearing out - SSD no longer meeting UBER (uncorrectable bit error rate), retention (keeping data safe while powered off), failure rate, or user capacity"),(0,r.kt)("li",{parentName:"ul"},"UBER = number of data errors / number of bits read"),(0,r.kt)("li",{parentName:"ul"},"WAF (Write Amplification Factor) = NAND writes / host writes"),(0,r.kt)("li",{parentName:"ul"},"TBW or PBW \u2013 amount of host writes to SSD before wearing out"),(0,r.kt)("li",{parentName:"ul"},"TBW = drive capacity ","*"," cycles / WAF"),(0,r.kt)("li",{parentName:"ul"},"DWPD (drive writes per day): amount of data you can write to device each day of the warranty (typically 5 years) without wearing out"),(0,r.kt)("li",{parentName:"ul"},"DWPD = TBW/365/5/drive capacity")),(0,r.kt)("h2",{id:"monitor-endurance-in-linux"},"Monitor Endurance in Linux"),(0,r.kt)("h3",{id:"nvme"},"NVMe"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/linux-nvme/nvme-cli"},"https://github.com/linux-nvme/nvme-cli")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://nvmexpress.org/open-source-nvme-management-utility-nvme-command-line-interface-nvme-cli/"},"https://nvmexpress.org/open-source-nvme-management-utility-nvme-command-line-interface-nvme-cli/")),(0,r.kt)("p",null,"Reading endurance with NVMe-CLI - this is the gas gauge that shows total endurance used"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"sudo nvme smart-log /dev/nvme0 | grep percentage_used"),"\nReading amount of writes that the drive have actually done"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"sudo nvme smart-log /dev/nvme0 | grep data_units_written"),"\nBytes written = output ",(0,r.kt)("em",{parentName:"p"}," 1000 ")," 512B"),(0,r.kt)("p",null,"TBW = output ",(0,r.kt)("em",{parentName:"p"}," 1000 ")," 512B / (1000^4) or (1024^4)"),(0,r.kt)("p",null,"To find out NAND writes, you will have use the vendor plugins for NVMe-CLI."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"sudo nvme <vendor name> help")),(0,r.kt)("p",null,"Example with an Intel SSD"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"sudo nvme intel smart-log-add /dev/nvme0")),(0,r.kt)("h3",{id:"sata"},"SATA"),(0,r.kt)("p",null,"In SATA you can use the following commands"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"sudo apt install smartmontools")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"sudo smartctl -x /dev/sda | grep Logical")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"sudo smartctl -a /dev/sda")),(0,r.kt)("p",null,"looking for Media_Wearout_Indicator"),(0,r.kt)("p",null,"note this does also work for NVMe for basic SMART health info"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"sudo smartctl -a /dev/nvme0")),(0,r.kt)("h3",{id:"sas"},"SAS"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"sg_logs /dev/sg1 --page=0x11")),(0,r.kt)("p",null,"look for"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Percentage used endurance indicator: 0%")),(0,r.kt)("p",null,"overview of SSD endurance testing from JEDEC industry standard here\n",(0,r.kt)("a",{parentName:"p",href:"https://www.jedec.org/sites/default/files/Alvin_Cox%20%5BCompatibility%20Mode%5D_0.pdf"},"https://www.jedec.org/sites/default/files/Alvin_Cox%20%5BCompatibility%20Mode%5D_0.pdf")),(0,r.kt)("h2",{id:"adding-new-models"},"Adding new models"),(0,r.kt)("p",null,"Please add your model string below if you want me to put it into my calculator and add to the list!"))}m.isMDXComponent=!0}}]);