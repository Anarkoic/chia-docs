"use strict";(self.webpackChunkchia_docs=self.webpackChunkchia_docs||[]).push([[5972],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>g});var r=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=r.createContext({}),u=function(e){var t=r.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},p=function(e){var t=u(e.components);return r.createElement(s.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},c=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=u(a),c=n,g=d["".concat(s,".").concat(c)]||d[c]||m[c]||o;return a?r.createElement(g,l(l({ref:t},p),{},{components:a})):r.createElement(g,l({ref:t},p))}));function g(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,l=new Array(o);l[0]=c;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[d]="string"==typeof e?e:n,l[1]=i;for(var u=2;u<o;u++)l[u]=a[u];return r.createElement.apply(null,l)}return r.createElement.apply(null,a)}c.displayName="MDXCreateElement"},1030:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>m,frontMatter:()=>o,metadata:()=>i,toc:()=>u});var r=a(7462),n=(a(7294),a(3905));const o={title:"SSD Endurance",slug:"/ssd-endurance"},l=void 0,i={unversionedId:"plotting/ssd-endurance",id:"plotting/ssd-endurance",title:"SSD Endurance",description:"The fastest plot creation is done completely in memory, but requires a server with a large amount of DRAM (256 GB for BladeBit CUDA, or 416 GB for BladeBit RAM). Most consumer motherboards don't support this much memory, so temporary storage must be used. This typically comes in the form of an SSD.",source:"@site/docs/plotting/ssd-endurance.md",sourceDirName:"plotting",slug:"/ssd-endurance",permalink:"/zh/ssd-endurance",draft:!1,editUrl:"https://github.com/Chia-Network/chia-docs/blob/main/docs/plotting/ssd-endurance.md",tags:[],version:"current",frontMatter:{title:"SSD Endurance",slug:"/ssd-endurance"},sidebar:"tutorialSidebar",previous:{title:"How To Plot",permalink:"/zh/plotting-how-to"},next:{title:"Moving Plots",permalink:"/zh/moving-plots"}},s={},u=[{value:"Math",id:"math",level:2},{value:"Monitor Endurance in Linux",id:"monitor-endurance-in-linux",level:2},{value:"NVMe",id:"nvme",level:3},{value:"SATA",id:"sata",level:3},{value:"SAS",id:"sas",level:3}],p={toc:u},d="wrapper";function m(e){let{components:t,...a}=e;return(0,n.kt)(d,(0,r.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"The fastest plot creation is done completely in memory, but requires a server with a large amount of DRAM (256 GB for BladeBit CUDA, or 416 GB for BladeBit RAM). Most consumer motherboards don't support this much memory, so temporary storage must be used. This typically comes in the form of an SSD."),(0,n.kt)("p",null,"Mainstream SSDs today use NAND flash technology to store data. NAND is high performance, scalable, and low cost - warranting the use in virtually every computing segment from mobile phones, SD cards, consumer laptops, and data centers. However, NAND must be erased before the cell is programmed, a process known as a program erase cycle. This can only be performed a certain amount of times before the NAND cell wears out and can no longer reliably store user data. This is defined generally as an SSD no longer meeting the UBER (uncorrectable bit error rate), retention time (how long the device can store user data safely while powered off, at a given temperature), or functional failure (device can no longer power on)."),(0,n.kt)("div",{style:{textAlign:"left"}},(0,n.kt)("img",{src:"/img/ssd-endurance/tbw_dwpd.png",alt:"TBW versus DWPD"}),(0,n.kt)("figcaption",{style:{textAlign:"left"}},(0,n.kt)("em",null,"Meme credit: Scrutinous"))),(0,n.kt)("p",null,"The metrics to measure endurance of an SSD is defined in Terabytes Written, or TBW, at a certain workload. The workload defined is generally the JESD219 workload from JEDEC organization. An SSD can still plot well beyond meeting its rated TBW limit, because UBER can be measured (when seeing host errors) and retention is not required (Chia plotting requires temporary or ephemeral storage)."),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Plotter"),(0,n.kt)("th",{parentName:"tr",align:null},"Cache / Ramdisk"),(0,n.kt)("th",{parentName:"tr",align:null},"Writes per K=32"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Chiapos beta (2020)"),(0,n.kt)("td",{parentName:"tr",align:null},"0"),(0,n.kt)("td",{parentName:"tr",align:null},"1.8 TBW")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Chiapos 2021"),(0,n.kt)("td",{parentName:"tr",align:null},"0"),(0,n.kt)("td",{parentName:"tr",align:null},"1.4 TBW")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"madMAx Chia_plot"),(0,n.kt)("td",{parentName:"tr",align:null},"0"),(0,n.kt)("td",{parentName:"tr",align:null},"1.43 TBW")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"madMAx Chia_plot"),(0,n.kt)("td",{parentName:"tr",align:null},"110G"),(0,n.kt)("td",{parentName:"tr",align:null},"0.396 TBW")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Bladebit Disk"),(0,n.kt)("td",{parentName:"tr",align:null},"0"),(0,n.kt)("td",{parentName:"tr",align:null},"1.225 TBW")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Bladebit Disk"),(0,n.kt)("td",{parentName:"tr",align:null},">","99G"),(0,n.kt)("td",{parentName:"tr",align:null},"0.381 TBW")))),(0,n.kt)("p",null,"Consumer NVMe SSDs are generally not recommended due to their lower endurance, and they often employ caching algorithms to faster media (SLC, or single level cell) for great bursty performance. They do not perform well under heavy workload sustained I/O.\nThere are very high performance consumer NVMe SSDs that will offer great plotting performance, but the lower rated endurance in TBW will result in a faster wearout."),(0,n.kt)("p",null,"Here are some ",(0,n.kt)("a",{parentName:"p",href:"https://docs.google.com/spreadsheets/d/1mNUYRWeJUaijEZXupwP5k6IuATZGj1FB/edit#gid=1857251151"},"endurance examples"),"."),(0,n.kt)("p",null,"You can learn more about SSD endurance from this ",(0,n.kt)("a",{parentName:"p",href:"https://www.snia.org/forums/cmsi/ssd-endurance"},"SNIA whitepaper from JM"),"."),(0,n.kt)("h2",{id:"math"},"Math"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"NAND P/E Cycles = amount of program / erase cycles NAND can do before wearing out. NAND programs (writes) in pages and erases in blocks (contains many pages)"),(0,n.kt)("li",{parentName:"ul"},"Wearing out - SSD no longer meeting UBER (uncorrectable bit error rate), retention (keeping data safe while powered off), failure rate, or user capacity"),(0,n.kt)("li",{parentName:"ul"},"UBER = number of data errors / number of bits read"),(0,n.kt)("li",{parentName:"ul"},"WAF (Write Amplification Factor) = NAND writes / host writes"),(0,n.kt)("li",{parentName:"ul"},"TBW or PBW \u2013 amount of host writes to SSD before wearing out"),(0,n.kt)("li",{parentName:"ul"},"TBW = drive capacity ","*"," cycles / WAF"),(0,n.kt)("li",{parentName:"ul"},"DWPD (drive writes per day): amount of data you can write to device each day of the warranty (typically 5 years) without wearing out"),(0,n.kt)("li",{parentName:"ul"},"DWPD = TBW/365/5/drive capacity")),(0,n.kt)("h2",{id:"monitor-endurance-in-linux"},"Monitor Endurance in Linux"),(0,n.kt)("h3",{id:"nvme"},"NVMe"),(0,n.kt)("p",null,"You can learn more about the NVMe CLI on the ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/linux-nvme/nvme-cli"},"NVMe CLI GitHub repository")," or ",(0,n.kt)("a",{parentName:"p",href:"https://nvmexpress.org/open-source-nvme-management-utility-nvme-command-line-interface-nvme-cli"},"NVMe CLI blog post"),"."),(0,n.kt)("p",null,"You can read total endurance used with the following NVMe CLI command:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"sudo nvme smart-log /dev/nvme0 | grep percentage_used\n")),(0,n.kt)("p",null,"This is how to read the amount of writes that the drive has actually done:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"sudo nvme smart-log /dev/nvme0 | grep data_units_written\n")),(0,n.kt)("p",null,"Bytes written = output ",(0,n.kt)("em",{parentName:"p"}," 1000 ")," 512B"),(0,n.kt)("p",null,"TBW = output ",(0,n.kt)("em",{parentName:"p"}," 1000 ")," 512B / (1000^4) or (1024^4)"),(0,n.kt)("p",null,"To find out NAND writes, you will have use the vendor plugins for NVMe-CLI."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"sudo nvme <vendor name> help\n")),(0,n.kt)("p",null,"Example with an Intel SSD"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"sudo nvme intel smart-log-add /dev/nvme0\n")),(0,n.kt)("h3",{id:"sata"},"SATA"),(0,n.kt)("p",null,"In SATA you can use the following commands"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"sudo apt install smartmontools\n")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"sudo smartctl -x /dev/sda | grep Logical\n")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"sudo smartctl -a /dev/sda\n")),(0,n.kt)("p",null,"looking for Media_Wearout_Indicator"),(0,n.kt)("p",null,"note this does also work for NVMe for basic SMART health info"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"sudo smartctl -a /dev/nvme0\n")),(0,n.kt)("h3",{id:"sas"},"SAS"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"sg_logs /dev/sg1 --page=0x11\n")),(0,n.kt)("p",null,"Look for"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"Percentage used endurance indicator: 0%\n")),(0,n.kt)("p",null,"Overview of SSD endurance testing from JEDEC industry standard here\n",(0,n.kt)("a",{parentName:"p",href:"https://www.jedec.org/sites/default/files/Alvin_Cox%20%5BCompatibility%20Mode%5D_0.pdf"},"https://www.jedec.org/sites/default/files/Alvin_Cox%20%5BCompatibility%20Mode%5D_0.pdf")))}m.isMDXComponent=!0}}]);