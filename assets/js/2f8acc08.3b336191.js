"use strict";(self.webpackChunkchia_docs=self.webpackChunkchia_docs||[]).push([[2468],{7593:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>c});var s=n(5893),o=n(1151);n(4866),n(5162);const a={slug:"/dao-known-issues",title:"DAO Known Issues"},r=void 0,i={id:"guides/dao/dao-known-issues",title:"DAO Known Issues",description:"This page contains a comprehensive list of known DAO issues. Be sure to read this list carefully before using the DAO primitive.",source:"@site/docs/guides/dao/dao-known-issues.md",sourceDirName:"guides/dao",slug:"/dao-known-issues",permalink:"/dao-known-issues",draft:!1,unlisted:!1,editUrl:"https://github.com/Chia-Network/chia-docs/blob/main/docs/guides/dao/dao-known-issues.md",tags:[],version:"current",frontMatter:{slug:"/dao-known-issues",title:"DAO Known Issues"},sidebar:"guides",previous:{title:"DAO CLI Guide",permalink:"/dao-cli-guide"},next:{title:"Simulator User Guide",permalink:"/guides/simulator-user-guide"}},l={},c=[{value:"Proposal Spam",id:"proposal-spam",level:2},{value:"Fake Proposals to lock DAO CATs",id:"fake-proposals-to-lock-dao-cats",level:2}];function u(e){const t={code:"code",h2:"h2",li:"li",p:"p",ul:"ul",...(0,o.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"This page contains a comprehensive list of known DAO issues. Be sure to read this list carefully before using the DAO primitive."}),"\n",(0,s.jsx)(t.h2,{id:"proposal-spam",children:"Proposal Spam"}),"\n",(0,s.jsxs)(t.p,{children:["Under normal circumstances, an attacker can create a malicious proposal to drain the DAO of its treasury. However, even if the attacker has secured enough ",(0,s.jsx)(t.code,{children:"YES"})," votes to meet the ",(0,s.jsx)(t.code,{children:"attendance_required"})," threshold to pass the proposal, the ",(0,s.jsx)(t.code,{children:"soft_close_length"})," will protect against this type of attack. As long as a sufficient number of ",(0,s.jsx)(t.code,{children:"NO"})," votes are added prior to the expiration of the ",(0,s.jsx)(t.code,{children:"soft_close_length"}),", the proposal (and the attack) will fail."]}),"\n",(0,s.jsx)(t.p,{children:"However, prior to creating this proposal, the attacker can use proposal spam to improve the chances of the attack's success."}),"\n",(0,s.jsxs)(t.p,{children:["The DAO wallet subscribes to ",(0,s.jsx)(t.code,{children:"PROPOSAL"})," coins by hinting the ",(0,s.jsx)(t.code,{children:"TREASURY_ID"})," in the ",(0,s.jsx)(t.code,{children:"memos"})," field upon the coin's creation. There is a limit on the number of items a ",(0,s.jsx)(t.code,{children:"full_node"})," will return to a wallet based on a subscribed puzzle_hash (including hinted coins):"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"trusted_max_subscribe_response_items"}),": 500000"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"max_subscribe_response_items"}),": 100000"]}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["The attacker can take advantage of this limit by creating multiple coins, each of which contains a hint equal to the ",(0,s.jsx)(t.code,{children:"TREASURY_ID"}),". Eventually a wallet will no longer get any additional coin states for newer coins from a ",(0,s.jsx)(t.code,{children:"full_node"}),' via the coin state subscription. This is the "proposal spam" part of the attack.']}),"\n",(0,s.jsxs)(t.p,{children:["If the attacker has created a sufficient number of the aforementioned coins to reach the subscription limit, the malicious proposal will be invisible to the wallets of every other DAO member. If the members are not alerted to the existence of the malicious proposal in some other way, the ",(0,s.jsx)(t.code,{children:"soft_close_length"})," will eventually be reached, and the proposal will succeed."]}),"\n",(0,s.jsx)(t.h2,{id:"fake-proposals-to-lock-dao-cats",children:"Fake Proposals to lock DAO CATs"}),"\n",(0,s.jsx)(t.p,{children:"An attacker can create spam proposals with the intent of locking DAO_CATs into voting mode permanently. There are two ways to accomplish this:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Create otherwise valid ",(0,s.jsx)(t.code,{children:"PROPOSAL"})," coins which don't meet the proposal minimum amount (e.g. 0 or 1 mojo coins)."]}),"\n",(0,s.jsx)(t.li,{children:"Create proposals without a timer coin."}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"In the event that such proposals are voted on by users, because the proposals can never be closed (even via self-destruct), any users who voted on these proposals will never be able to unlock the coins they voted with. Note that coins in this state could continue to be used to vote on other proposals."}),"\n",(0,s.jsxs)(t.p,{children:["The current mitigation to this is that the wallet will filter out any proposals which either don't meet the proposal minimum amount or don't have valid timer coins. It is strongly suggested to use the ",(0,s.jsx)(t.code,{children:"show_proposal"})," command with any proposal that you intend to vote on, and check that it is valid."]})]})}function d(e={}){const{wrapper:t}={...(0,o.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},5162:(e,t,n)=>{n.d(t,{Z:()=>r});n(7294);var s=n(512);const o={tabItem:"tabItem_Ymn6"};var a=n(5893);function r(e){let{children:t,hidden:n,className:r}=e;return(0,a.jsx)("div",{role:"tabpanel",className:(0,s.Z)(o.tabItem,r),hidden:n,children:t})}},4866:(e,t,n)=>{n.d(t,{Z:()=>j});var s=n(7294),o=n(512),a=n(2466),r=n(6550),i=n(469),l=n(1980),c=n(7392),u=n(12);function d(e){return s.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,s.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:t,children:n}=e;return(0,s.useMemo)((()=>{const e=t??function(e){return d(e).map((e=>{let{props:{value:t,label:n,attributes:s,default:o}}=e;return{value:t,label:n,attributes:s,default:o}}))}(n);return function(e){const t=(0,c.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function p(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function m(e){let{queryString:t=!1,groupId:n}=e;const o=(0,r.k6)(),a=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,l._X)(a),(0,s.useCallback)((e=>{if(!a)return;const t=new URLSearchParams(o.location.search);t.set(a,e),o.replace({...o.location,search:t.toString()})}),[a,o])]}function f(e){const{defaultValue:t,queryString:n=!1,groupId:o}=e,a=h(e),[r,l]=(0,s.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!p({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const s=n.find((e=>e.default))??n[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:t,tabValues:a}))),[c,d]=m({queryString:n,groupId:o}),[f,b]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[o,a]=(0,u.Nk)(n);return[o,(0,s.useCallback)((e=>{n&&a.set(e)}),[n,a])]}({groupId:o}),v=(()=>{const e=c??f;return p({value:e,tabValues:a})?e:null})();(0,i.Z)((()=>{v&&l(v)}),[v]);return{selectedValue:r,selectValue:(0,s.useCallback)((e=>{if(!p({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);l(e),d(e),b(e)}),[d,b,a]),tabValues:a}}var b=n(2389);const v={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var g=n(5893);function w(e){let{className:t,block:n,selectedValue:s,selectValue:r,tabValues:i}=e;const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,a.o5)(),u=e=>{const t=e.currentTarget,n=l.indexOf(t),o=i[n].value;o!==s&&(c(t),r(o))},d=e=>{let t=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const n=l.indexOf(e.currentTarget)+1;t=l[n]??l[0];break}case"ArrowLeft":{const n=l.indexOf(e.currentTarget)-1;t=l[n]??l[l.length-1];break}}t?.focus()};return(0,g.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":n},t),children:i.map((e=>{let{value:t,label:n,attributes:a}=e;return(0,g.jsx)("li",{role:"tab",tabIndex:s===t?0:-1,"aria-selected":s===t,ref:e=>l.push(e),onKeyDown:d,onClick:u,...a,className:(0,o.Z)("tabs__item",v.tabItem,a?.className,{"tabs__item--active":s===t}),children:n??t},t)}))})}function x(e){let{lazy:t,children:n,selectedValue:o}=e;const a=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=a.find((e=>e.props.value===o));return e?(0,s.cloneElement)(e,{className:"margin-top--md"}):null}return(0,g.jsx)("div",{className:"margin-top--md",children:a.map(((e,t)=>(0,s.cloneElement)(e,{key:t,hidden:e.props.value!==o})))})}function k(e){const t=f(e);return(0,g.jsxs)("div",{className:(0,o.Z)("tabs-container",v.tabList),children:[(0,g.jsx)(w,{...e,...t}),(0,g.jsx)(x,{...e,...t})]})}function j(e){const t=(0,b.Z)();return(0,g.jsx)(k,{...e,children:d(e.children)},String(t))}},1151:(e,t,n)=>{n.d(t,{Z:()=>i,a:()=>r});var s=n(7294);const o={},a=s.createContext(o);function r(e){const t=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),s.createElement(a.Provider,{value:t},e.children)}}}]);