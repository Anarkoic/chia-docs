"use strict";(self.webpackChunkchia_docs=self.webpackChunkchia_docs||[]).push([[56],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>f});var a=n(7294);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,s=function(e,t){if(null==e)return{};var n,a,s={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var l=a.createContext({}),h=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=h(e.components);return a.createElement(l.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,s=e.mdxType,o=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),p=h(n),d=s,f=p["".concat(l,".").concat(d)]||p[d]||u[d]||o;return n?a.createElement(f,r(r({ref:t},c),{},{components:n})):a.createElement(f,r({ref:t},c))}));function f(e,t){var n=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var o=n.length,r=new Array(o);r[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[p]="string"==typeof e?e:s,r[1]=i;for(var h=2;h<o;h++)r[h]=n[h];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},4922:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>h});var a=n(7462),s=(n(7294),n(3905));const o={title:"Challenges",slug:"/consensus-challenges"},r=void 0,i={unversionedId:"consensus/challenges",id:"consensus/challenges",title:"Challenges",description:"The Chia consensus algorithm relies on timelords running VDFs for periods of time called sub-slots, which are adjusted periodically (and automatically) to take around 10 minutes. During every sub-slot, challenges are released by timelords, and a sort of mini lottery starts, where farmers check their plots for proofs of space. When farmers find a proof of space that qualifies, they broadcast it to the network.",source:"@site/docs/consensus/challenges.md",sourceDirName:"consensus",slug:"/consensus-challenges",permalink:"/zh/consensus-challenges",draft:!1,editUrl:"https://github.com/Chia-Network/chia-docs/blob/main/docs/consensus/challenges.md",tags:[],version:"current",frontMatter:{title:"Challenges",slug:"/consensus-challenges"},sidebar:"tutorialSidebar",previous:{title:"Proof of Time",permalink:"/zh/proof-of-time"},next:{title:"Signage and Infusion Points",permalink:"/zh/signage-and-infusion-points"}},l={},h=[{value:"Genesis Challenge",id:"genesis-challenge",level:2}],c={toc:h},p="wrapper";function u(e){let{components:t,...n}=e;return(0,s.kt)(p,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("p",null,"The Chia consensus algorithm relies on timelords running VDFs for periods of time called ",(0,s.kt)("em",{parentName:"p"},"sub-slots"),", which are adjusted periodically (and automatically) to take around 10 minutes. During every sub-slot, challenges are released by timelords, and a sort of mini lottery starts, where farmers check their plots for proofs of space. When farmers find a proof of space that qualifies, they broadcast it to the network."),(0,s.kt)("p",null,"The difficulty adjusts automatically to target 32 winning proofs for the entire network in each sub-slot, or about one winner every 18.75 seconds on average (32 winners per 600 seconds). The winning proofs are infused into the VDF at different times within the sub-slot."),(0,s.kt)("admonition",{type:"info"},(0,s.kt)("p",{parentName:"admonition"},"A sub-slot is always targeted to last 10 minutes. There is also a period of time called a ",(0,s.kt)("em",{parentName:"p"},"slot"),". Typically, a slot and a sub-slot are exactly the same thing. However, in order to prevent long-range attacks, slots are required to have at least 16 blocks (and sub-slots are not). If a sub-slot ends with fewer than 16 blocks having been created, the same slot must continue for another sub-slot. See the ",(0,s.kt)("a",{parentName:"p",href:"/overflow-blocks#minimum-block-requirement"},"Overflow Blocks and Weight page")," (minimum block requirement) for more info.")),(0,s.kt)("p",null,"The consensus requires farmers to follow the heaviest chain, which is the chain that has the highest accumulated difficulty (usually the chain with the most blocks)."),(0,s.kt)("figure",null,(0,s.kt)("img",{src:"/img/challenges.png",alt:"drawing"}),(0,s.kt)("figcaption",null,"Figure 4: Three sub-slots. The x axis represents time. Dotted lines represent VDF execution, advancing in time from left to right. Arrows represent hash dependencies (an object which points to another object includes the hash of the second object).")),(0,s.kt)("p",null,"In figure 4, we can see three challenge points, c1, c2, and c3. At the these points timelords create challenges (256-bit hashes) which are provided as input to VDFs. Timelords take these hashes, and start computing a VDF on this challenge, for the specified number of iterations. In this example, each slot is 100,000,000 iterations. When the VDF is finished, the timelord publishes the new challenge and the proof of the VDF. An infusion of end-of-slot information happens at the end of each sub-slot."),(0,s.kt)("p",null,"A challenge is always a 256-bit hash. The base info that is always included in this hash is the challenge chain VDF. However, the infused challenge chain, SubEpochSummary, difficulty, and sub slot iters might also be included, depending on where we are in the epoch cycle:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-python"},"class ChallengeChainSubSlot(Streamable):\n    challenge_chain_end_of_slot_vdf: VDFInfo\n    infused_challenge_chain_sub_slot_hash: Optional[bytes32]  # Only at the end of a slot\n    subepoch_summary_hash: Optional[bytes32]  # Only once per sub-epoch, and one sub-epoch delayed\n    new_sub_slot_iters: Optional[uint64]  # Only at the end of epoch, sub-epoch, and slot\n    new_difficulty: Optional[uint64]  # Only at the end of epoch, sub-epoch, and slot\n")),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Sub-slot"),": a segment of a fixed number of VDF iterations, subject to periodic work difficulty adjustments, which automatically target a time of 10 minutes."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Sub-slot iterations"),": determines how many VDF iterations each sub-slot must have. This number is periodically adjusted."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Challenge"),": a sha256 output string. It is used as a proof-of-space challenge for farmers' plots. It is also used for the challenge chain VDF, and is sometimes referred to as a ",(0,s.kt)("em",{parentName:"p"},"challenge hash"),"."),(0,s.kt)("p",null,"As you can see in Figure 4, there are three VDFs being executed concurrently, each of which serves a different purpose. They are explained in detail in the ",(0,s.kt)("a",{parentName:"p",href:"/three-vdf-chains"},"Three VDF Chains page"),"."),(0,s.kt)("p",null,"In the networking protocol, the three VDF proofs are usually passed around together, in what is called an ",(0,s.kt)("em",{parentName:"p"},"end of sub-slot bundle"),"."),(0,s.kt)("h2",{id:"genesis-challenge"},"Genesis Challenge"),(0,s.kt)("p",null,"The genesis challenge is the first challenge on a network that uses the Proof of Space and Time consensus. The timelords use this challenge to calculate and broadcast the very first signage point. Chia's mainnet, testnets and simulated networks each have their own unique ",(0,s.kt)("em",{parentName:"p"},"genesis challenge"),"."),(0,s.kt)("p",null,"The genesis challenge is created arbitrarily, by hashing a preimage. In the case of Chia's mainnet, the preimage included the hash of Bitcoin block ",(0,s.kt)("a",{parentName:"p",href:"https://www.blockchain.com/explorer/blocks/btc/675317"},"675317"),", which was mined shortly prior to the launch of Chia's network. It also included the following message from Bram:"),(0,s.kt)("p",null,(0,s.kt)("inlineCode",{parentName:"p"},'"Operational error causes Fed payment system to crash" We stand on the shoulders of giants, now let\'s get farming!')),(0,s.kt)("p",null,"The exact text of the preimage for Chia's mainnet is:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},'bitcoin_hash:0000000000000000000942b19f16b83a316acfa31e067c0b766c4dda034dc37f,bram_message:"Operational error causes Fed payment system to crash" We stand on the shoulders of giants, now let\'s get farming!\n')),(0,s.kt)("p",null,"The SHA256 hash of this preimage is:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"ccd5bb71183532bff220ba46c268991a3ff07eb358e8255a65c30a2dce0e5fbb\n")),(0,s.kt)("p",null,"This hash is the genesis challenge for Chia's mainnet. The complete JSON data for the genesis challenge is located ",(0,s.kt)("a",{parentName:"p",href:"https://download.chia.net/notify/mainnet_alert.txt"},"here"),". The first block on Chia's mainnet (",(0,s.kt)("a",{parentName:"p",href:"https://www.spacescan.io/block/0"},"block 0"),") was created at signage point ",(0,s.kt)("inlineCode",{parentName:"p"},"2"),"; it points to the genesis challenge as its previous block. The prefarm was then distributed in ",(0,s.kt)("a",{parentName:"p",href:"https://www.spacescan.io/block/1"},"block 1"),", at signage point ",(0,s.kt)("inlineCode",{parentName:"p"},"7"),"."),(0,s.kt)("p",null,"The genesis challenge for other networks can be found opening ",(0,s.kt)("inlineCode",{parentName:"p"},"config.yaml")," (located in ",(0,s.kt)("inlineCode",{parentName:"p"},"~/.chia/mainnet/config")," for Chia's mainnet and testnets) and searching for ",(0,s.kt)("inlineCode",{parentName:"p"},"GENESIS_CHALLENGE:")," in the section corresponding to the desired network."))}u.isMDXComponent=!0}}]);